# 5.3.1 文本定位操作符（Text-Positioning Operators）

文本空间是在其中显示文本的坐标系。它由文本矩阵、Tm和文本状态参数Tfs、Th和Trise定义，它们共同决定了从文本空间到用户空间的转换。具体来说，由文本显示操作符显示的第一个符号的原点被放置在文本空间的原点。如果文本空间已被平移、缩放或旋转，则用户空间中字形的位置、大小或方向将相应地改变。

表5.5文本定位操作符

| 操作数         | 操作符 | 描述                                                                                                                                                                        |
| ----------- | --- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| tx ty       | Td  | 移动到下一行的开始点，从当前行的开始部分偏移（tx、ty）。Tx和ty是用未缩放的文本空间单位表示的数字。更准确地说，该操作符将执行以下分配：![](<../../.gitbook/assets/image (35).png>)                                                        |
| tx ty       | TD  | <p>移动到下一行的开始点，从当前行的开始部分偏移（tx、ty）。作为一个副作用，该操作符在文本状态下设置前导参数。此操作符的效果与以下代码相同：</p><p><img src="../../.gitbook/assets/image (42).png" alt=""></p>                               |
| a b c d e f | Tm  | 设置文本矩阵Tm和文本行矩阵Tlm：![](<../../.gitbook/assets/image (46).png>)操作数均为数字，Tm和Tlm的初始值为单位矩阵\[1 0 01 0 0]。虽然操作数指定了一个矩阵，但它们是作为6个单独的数字传递给Tm的，而不是作为一个数组。由操作数指定的矩阵没有连接到当前文本矩阵上，而是替换它。 |
| —           | T\* | <p>移动到下一行的开头。该操作符与代码</p><p><img src="../../.gitbook/assets/image (45).png" alt=""></p><p>具有相同的效果，其中Tl是文本状态中的当前领先参数。</p>                                                   |

在文本对象的开头，Tm是单位矩阵，因此，文本空间的起源最初与用户空间的起源相同。表5.5中描述的文本定位操作符改变了Tm，从而控制了随后绘制的符号的位置。此外，下一节表5.6中描述的文本显示操作符将更新Tm(通过改变其e和f翻译组件)，以考虑每个绘制的字形的水平或垂直位移以及文本状态中的任何字符或词间距参数。

此外，文本对象会跟踪文本行矩阵Tlm，它会捕获文本行开头的Tm的值。这可以很方便地对齐均匀间隔的文本线。文本定位和文本显示操作符会在表5.5和表5.6中提到的特定场合读取和设置Tlm。

注意：文本定位操作符只能出现在文本对象中。
