# 8.7.1.2 UR

UR变换方法应用于检测文档的更改使得“使用权签名”无效，该签名是由权限字典中的UR3条目指定的（参见“权限”）。使用权签名告知哪些交互式功能是可用的，哪些是不可用的。 签名用于验证权限是否由真正的授权机构授予。 变换参数字典指定了签名有效时，应启用的附加权限。 由于文档在不允许的方式或被未被授予扩展权限的情况下，被修改导致签名无效，这时，其他权限不予授权。

UR3（PDF 1.6）：首先，验证字节范围摘要，以确定ByteRange指定的文档部分是否与签名时文档的状态相一致。 接下来，检查文档的当前版本，判断是否对变换参数指定不允许修改的对象进行了修改。





表8.105 UR变换参数字典（transform parameters dictionary）中的条目

| key       | type        | value                                                                                                                                                                                                                                                                                                                                                                                                       |
| --------- | ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Type      | name        | （可选）如果存在，则应为TransformParams。                                                                                                                                                                                                                                                                                                                                                                                |
| Document  | array       | （可选）名称数组，指定文档的附加文档的使用权限。 唯一定义的有效值为：FullSave，它允许修改的表单或注释数据进行保存。 （PDF 1.5）任何允许修改文档的使用权，都应启用FullSave权限。如果PDF文档包含UR3字典，则只允许修改文档的Annots条目指定的权限将隐式启用FullSave权限。 对于所有其他权限，应明确启用FullSave以保存文档。 （签名权应允许在签署过程中保存，但不允许保存）。                                                                                                                                                                                             |
| Msg       | text string | （可选）可用于指定任意信息的文本字符串，例如向文档添加使用权的原因。                                                                                                                                                                                                                                                                                                                                                                          |
| V         | name        | （可选）UR转换参数字典版本。 值应为2.2。 如果存在未知版本，则不应启用任何权限。注意：此值是名称对象，而不是数字。默认值：2.2。                                                                                                                                                                                                                                                                                                                                        |
| Annots    | array       | （可选）名称数组，用于指定与注释相关的使用权限。 有效名称（PDF 1.5）：Create, Delete, Modify,Copy, Import,和Export。仅当从权限字典的UR3条目引用签名字典时，才允许使用以下名称（PDF 1.6）：Online-允许在线注释; 即：服务器上传或下载标记注释的能力。 SummaryView-允许显示一个用户界面，用于汇总文档中的注释（标记注释）。                                                                                                                                                                                                       |
| Form      | array       | （可选）名称数组，指定表单域相关的使用权限。有效名称（PDF 1.5）：Add - 允许用户将表单字段添加到文档中。Delete - 允许用户删除文档的表单域。FillIn-允许用户保存已完成表单填写的文档。Import - 允许用户以FDF、XFDF和文本（CSV / TSV）格式导入表单数据文件。Export - 允许用户将表单数据文件导出为FDF或XFDF。SubmitStandalone-允许用户在Web浏览器中未打开文档时提交表单数据。SpawnTemplate-允许从命名页面模板实例化新页面。仅当从权限字典的UR3条目引用签名字典时，才允许使用以下名称（PDF 1.6）：BarcodePlaintext-允许（PDF 1.6）文本表单域数据被编码为明文二维条形码。Online-允许（PDF 1.6）特定的表单在线机制，如SOAP或Active Data Object。 |
| Signature | array       |  （可选）名称数组，指定与签名相关的使用权限。 唯一定义的值应为**Modify**，表示：允许用户将数字签名应用于现有签名表单域或清除签名表单域。                                                                                                                                                                                                                                                                                                                                  |
| EF        | array       | （可选; PDF 1.6）名称数组，用于指定文档中命名嵌入文件的使用权限。 有效名称应为Create，Delete，Modify和Import。                                                                                                                                                                                                                                                                                                                                    |
| P         | boolean     | （可选; PDF 1.6）如果为true，则文档的权限应在所有被授权的应用程序中限制，同时允许此词典的其他条目启用对应权限。 默认值：false。                                                                                                                                                                                                                                                                                                                                   |
