# 8.4.5.21 水印注释 (Watermark Annotations)

水印标注(PDF1.6)用于表示预计将在页面上以固定大小和位置打印的图形，而不管打印页面的尺寸如何。水印注释字典的FixedPrint条目（见表8.41）是一个包含用于指定注释大小和位置的值的字典（参见表8.42）。水印注释没有弹出窗口或其他交互式元素。

当在屏幕上显示水印注释时，查看器应用程序应该使用媒体框的尺寸作为页面大小，以便滚动和缩放行为与其他注释相同。注意：由于许多打印设备具有不可打印的边距，因此建议在将水印注释定位到页面边缘附近时应考虑这些边距。

表8.41特定于水印注释的附加条目

| KEY        | TYPE       | VALUE                                                                                                                                                        |
| ---------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Subtype    | name       | （必填）此字典所描述的注释类型；必须是水印注释的"**Watermark**"。                                                                                                                     |
| FixedPrint | dictionary | （可选）一个固定的打印字典（请参见表8.42），它指定应如何相对于目标媒体的尺寸绘制此标注。如果不存在此条目，则绘制标注时不特别考虑目标媒体的标注。注：如果在绘制时不知道目标介质的尺寸，则将相对于页面的MediaBox条目指定的尺寸进行绘制（见表3.27）。                            |
| Type       | name       | （需要）必须是 **FixedPrint.**                                                                                                                                      |
| Matrix     | array      | <p>（可选）在渲染之前用于转换注释的矩形的矩阵。</p><p>  默认值：标识矩阵[1 0 01 0 0]。注意：当将内容定位到页面边缘附近时，建议使用此条目提供合理的偏移量，以允许不可打印的边缘。</p><p>注意：当将内容定位到页面边缘附近时，建议使用此条目提供合理的偏移量，以允许不可打印的边缘。</p> |
| H          | number     | <p>（可选）要水平转换相关内容的量，作为目标媒体宽度的百分比（如果未知，则表示页面的MediaBox的宽度）。1.0表示100%，0.0表示0%。不建议使用负值，因为它们可能会导致从页面上提取内容。</p><p>默认值：0。</p>                                        |
| V          | number     | <p>（可选）垂直转换相关内容的量，作为目标媒体高度的百分比（如果未知，则表示页面的MediaBox的高度）。1.0代表100%，0.0代表0%。不建议使用负值，因为它们可能会导致从页面上提取内容。</p><p>默认值：0。</p>                                         |

当使用**FixedPrint**条目渲染水印注释时，会发生以下行为：

* 注释的矩形(由其**Rect条目**指定)被转换为原点，并通过其固定打印字典的矩阵条目进行转换，以生成具有任意方向的四边形。
* 转换后的注释矩形被定义为包含这个四边形的最小的直立矩形；它被用于代替第612页算法8.1的步骤2和步骤3中提到的注释矩形。

此外，给定矩阵B将缩放和旋转的页面映射到默认用户空间，该矩阵B将计算一个新矩阵，取消B并将打印页面的原点转换为默认用户空间的原点。应用此转换以确保正确的缩放和对齐。

示例8.10显示了一个水印注释，它打印距离左侧1英寸和距离打印页面顶部1英寸的文本字符串。

示例 8.10

```
8 0 obj % Watermark appearance
<<
    /Length ...
    /Subtype /Form
    /Resources ...
    /BBox ...
>>

stream
...
BT
    /F1 1 Tf
    36 0 0 36 0 -36 Tm
    (Do Not Build) Tx
ET
...
endstream
endobj

9 0 obj % Watermark annotation
<<
    /Rect ...
    /Type /Annot
    /Subtype /Watermark
    /FixedPrint 10 0 R
    /AP <</N 8 0 R>>
>>
% in the page dictionary

/Annots [9 0 R]
10 0 obj % Fixed print dictionary
<<
    /Type /FixedPrint
    /Matrix [1 0 0 1 72 -72] % Translate one inch right and one inch down
    /H 0
    /V 1.0 % Translate the full height of the page vertically
>>
endobj
```
