# 8.2.2 文档大纲

PDF文档可以选择在屏幕上显示文档大纲，允许用户交互式地从文档的一部分导航到另一部分。大纲由一个树形结构的大纲项(有时称为书签)组成，作为一个可视化的内容表向用户显示文档的结构。用户可以通过单击鼠标以交互式方式打开和关闭单个项目。当一个项目被打开时，它在层次结构中的直接子项目在屏幕上变得可见;每个子元素依次可以打开或关闭，选择性地显示或隐藏层次结构的进一步部分。当一个项被关闭时，它在层次结构中的所有后代都被隐藏。单击任何可见项目的文本将激活该项目，导致查看器应用程序跳转到目标或触发与该项目相关的动作。

文档大纲层次结构的根是一个大纲字典，它由文档目录中的大纲条目指定(见3.6.1，文档目录)。表8.3显示了本词典的内容。层次结构中的每个单独大纲项都由大纲项字典定义(表8.4)。层次结构中每一层的项目形成一个链表，通过它们的Prev和Next条目链接在一起，并通过父项目中的First和Last条目访问(如果是顶级项目，则在大纲字典中)。在屏幕上显示时，给定级别的项目按照它们在链表中出现的顺序出现。(参见附录h中的实现说明74)



表8.3大纲字典中的条目

| Key   | Type       | VALUE                                                |
| ----- | ---------- | ---------------------------------------------------- |
| Type  | name       | （可选）此字典所描述的PDF对象的类型；如果存在，则必须是大纲字典的“**Outlines**”。    |
| First | dictionary | （如果有任何打开或关闭的大纲条目，则必需的；必须是间接引用）大纲项目字典，表示大纲中的第一个顶级项目。  |
| Last  | dictionary | （如果有任何打开或关闭的大纲条目，则是必需的；必须是间接引用）表示大纲中最后一个顶级项目的大纲项目字典。 |
| Count | integer    | （如果文档有任何开放大纲条目，则必需）大纲所有级别的开放项目总数。如果没有打开的大纲项，则应省略此条目。 |



表8.4大纲项 字典中的条目

| KEY    | Type                        | VALUE                                                                                                                                        |
| ------ | --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| Title  | text string                 | （必选）要在屏幕上显示的文本。                                                                                                                              |
| Parent | dictionary                  | （必选；必须是间接引用）大纲层次结构中此项的父项。顶级项的父项是大纲字典本身。                                                                                                      |
| Prev   | dictionary                  | （除每个级别的第一项外的所有项均必需；必须是间接参考）此大纲级别的上一项。                                                                                                        |
| Next   | dictionary                  | （除每个级别的最后一个项目外，所有项目均必需；必须是间接参考）此大纲级别的下一个项目。                                                                                                  |
| First  | dictionary                  | （如果项目有任何子系，则必需；必须是间接引用）大纲层次结构中的直接子系的第一个。                                                                                                     |
| Last   | dictionary                  | （如果项目有任何子系，则必需；必须是间接引用）大纲层次结构中的最后一个直接子项。                                                                                                     |
| Count  | integer                     | （如果项目有任何子代，则必需）如果项目打开，则其在大纲层次结构所有较低级别的打开子代总数。如果项目关闭，则为负整数，其绝对值指定在重新打开项目时将出现多少后代数。                                                            |
| Dest   | name, byte string, or array | （可选；如果存在A条目，则不允许）激活此项目时要显示的目标（请参见第8.2.1节“目的地”；另请参见附录H中的实施说明75）。                                                                              |
| A      | dictionary                  | （可选；PDF1.1；如果存在Dest条目，则不允许）此项被激活时要执行的操作（请参见第8.5节“操作”）。                                                                                       |
| SE     | dictionary                  | （可选；PDF1.3；必须是间接引用）该项目所引用的结构元素（请参见第10.6.1节，“结构层次结构”）。注意：将大纲项目与结构元素（例如章节开头）关联的能力是PDF1.3功能。为了与早期PDF版本向后兼容，该项还应该指定与显示指定结构元素内容的页面区域对应的目的地(Dest)。 |
| C      | array                       | (可选；PDF1.4)由0.0到1.0范围内的三个数字组成的数组，表示要用于大纲条目文本的颜色的DeviceRGB颜色空间中的组件。默认值：\[0.00.00.0]。                                                          |
| F      | integer                     | （可选；PDF1.4)一组指定用于显示大纲项文本的样式特征的标志（请参见表8.5）。默认值：0。                                                                                             |

大纲项字典的F条目(PDF1.4)的值是一个无符号的32位整数，其中包含指定要显示该项的样式特征的标志。标志字内的位位置从1（低阶）编号到32（高阶）。表8.5显示了标志的含义；所有未定义的标志位都被保留，必须设置为0。

表8.5大纲项 标志

| BIT POSITION | NAME   | MEANING         |
| ------------ | ------ | --------------- |
| 1            | Italic | 如果设置，则以斜体显示该项目。 |
| 2            | Bold   | 如果设置，则以粗体显示项目。  |

示例8.1显示了一个典型的大纲字典和大纲项目字典。有关一个完整的大纲层次结构的示例，请参见附录G。

例 8.1

```
21 0 obj
<< /Count 6
    /First 22 0 R
    /Last 29 0 R
>>
endobj

22 0 obj
 << /Title (Chapter 1)
    /Parent 21 0 R
    /Next 26 0 R
    /First 23 0 R
    /Last 25 0 R
    /Count 3
    /Dest [3 0 R /XYZ 0 792 0]
 >>
endobj
```
